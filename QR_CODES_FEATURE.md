# QR-коды для инструментов

## Описание

Добавлена функциональность QR-кодов для всех инструментов в системе ToolManager.

## Что было реализовано

### 1. Компонент ToolQRCode

Создан переиспользуемый компонент `frontend/src/components/ToolQRCode.jsx` со следующими возможностями:

- **Генерация QR-кода**: Каждый QR-код содержит URL вида `https://domain.com/tools/{toolId}`
- **Масштабируемость**: Размер QR-кода настраивается через props
- **Модальное окно**: При клике на QR-код открывается увеличенная версия
- **Скачивание**: Возможность скачать QR-код в формате PNG
- **Высокое качество**: QR-коды используют уровень коррекции ошибок "H" (30% восстановление)

### 2. Интеграция в UI

QR-коды добавлены в следующие места:

#### Страница списка инструментов (ToolsPage)
- **Вид карточек (Grid)**: QR-код 80x80px справа от информации о владельце/складе
- **Вид таблицы (Table)**: QR-код 50x50px в отдельной колонке "QR-код"

#### Страница деталей инструмента (ToolDetailsPage)
- QR-код 200x200px в отдельном блоке под изображением инструмента
- Красиво оформлен в серую рамку с заголовком "QR-код инструмента"

### 3. Функциональность

- **Уникальный ID**: QR-код содержит только URL с уникальным ID инструмента
- **Не хранит данные**: QR-код не содержит название, статус или другую информацию
- **Прямая ссылка**: При сканировании QR-кода пользователь попадает на страницу деталей инструмента
- **Модальное окно**: Кнопка увеличения (иконка FiMaximize2) в правом нижнем углу QR-кода
- **Скачивание**: В модальном окне есть кнопка "Скачать" для сохранения QR-кода в PNG

### 4. Библиотеки

Использована библиотека `qrcode.react` (v3.x):
- Легковесная и быстрая
- Поддержка SVG для четкого отображения
- Хорошая документация и активная поддержка

## Технические детали

### Формат URL
```javascript
const getToolUrl = () => {
  const origin = window.location.origin;
  return `${origin}/tools/${tool.id}`;
};
```

### Уровни коррекции ошибок
- Маленькие QR-коды (50-100px): Level "M" (15% восстановление)
- Большие QR-коды (200px+): Level "H" (30% восстановление)

### Responsive дизайн
- QR-коды адаптируются под размер экрана
- В мобильной версии карточки QR-код остается видимым и кликабельным

## Использование

### Для пользователей
1. **Сканирование**: Используйте любое приложение для чтения QR-кодов на смартфоне
2. **Переход на страницу**: QR-код ведет на страницу деталей инструмента
3. **Скачивание**: Кликните на QR-код и нажмите "Скачать" для печати

### Для разработчиков
```jsx
import ToolQRCode from '../components/ToolQRCode';

// Базовое использование
<ToolQRCode tool={tool} size={100} />

// С расширенными опциями
<ToolQRCode 
  tool={tool} 
  size={150} 
  showLabel={true} 
  showExpandButton={true} 
/>
```

## Props компонента ToolQRCode

| Prop | Тип | По умолчанию | Описание |
|------|-----|--------------|----------|
| tool | Object | required | Объект инструмента (минимум с полем `id`) |
| size | Number | 100 | Размер QR-кода в пикселях |
| showLabel | Boolean | false | Показывать подпись "QR-код" |
| showExpandButton | Boolean | true | Показывать кнопку увеличения |

## Файлы изменены

1. `frontend/src/components/ToolQRCode.jsx` (новый)
2. `frontend/src/components/ToolCard.jsx` (добавлен импорт и использование)
3. `frontend/src/components/ToolTable.jsx` (добавлена колонка с QR-кодом)
4. `frontend/src/pages/ToolDetailsPage.jsx` (добавлен блок с QR-кодом)
5. `frontend/package.json` (добавлена зависимость qrcode.react)

## Примеры использования

### Сценарий 1: Инвентаризация
Распечатайте QR-коды и наклейте их на физические инструменты. При инвентаризации просто сканируйте код для просмотра актуальной информации.

### Сценарий 2: Выдача инструментов
Сотрудник сканирует QR-код на инструменте и сразу видит, доступен ли он для выдачи.

### Сценарий 3: Быстрый доступ
На складе разместите распечатанные QR-коды для быстрого доступа к информации об инструментах.

## Безопасность

- QR-коды не содержат чувствительной информации
- Доступ к данным инструмента контролируется системой аутентификации
- При переходе по ссылке из QR-кода требуется авторизация в системе
